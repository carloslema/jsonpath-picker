"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function isCollapsable(e){return e instanceof Object&&0<Object.keys(e).length}function isUrl(e){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-/]))?/.test(e)}function json2html(e,t){var n="";if("string"==typeof e){var a=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");isUrl(a)?n+='<a href="'.concat(a,'" class="json-string">').concat(a,"</a>"):n+='<span class="json-string">"'.concat(a,'"</span>')}else if("number"==typeof e)n+='<span class="json-literal">'.concat(e,"</span>");else if("boolean"==typeof e)n+='<span class="json-literal">'.concat(e,"</span>");else if(null===e)n+='<span class="json-literal">null</span>';else if(e instanceof Array)if(0<e.length){n+='[<ol class="json-array">';for(var o=0;o<e.length;o+=1)n+='<li data-key-type="array" data-key="'.concat(o,'">'),isCollapsable(e[o])&&(n+='<a href class="json-toggle"></a>'),n+=json2html(e[o],t),o<e.length-1&&(n+=","),n+="</li>";n+="</ol>]"}else n+="[]";else if("object"===_typeof(e)){var s=Object.keys(e).length;if(0<s){for(var l in n+='{<ul class="json-dict">',e)if(e.hasOwnProperty(l)){n+='<li data-key-type="object" data-key="'.concat(l,'">');var r=t.outputWithQuotes?'<span class="json-string">"'.concat(l,'"</span>'):l;isCollapsable(e[l])?n+='<a href class="json-toggle">'.concat(r,"</a>"):n+=r,n+='<span class="pick-path" title="Pick path">&#x1f4cb;</span>',n+=": ".concat(json2html(e[l],t)),0<(s-=1)&&(n+=","),n+="</li>"}n+="</ul>}"}else n+="{}"}return n}function off(e,t,n,a){var o=a,s=n,l=t;"function"==typeof t&&(o=n,s=t,l=window),o=!!o,(l="string"==typeof l?document.querySelector(l):l)&&l.removeEventListener(e,s,o)}function siblings(e,t,n){for(var a=[],o=0;o<e.parentNode.children.length;o+=1){var s=e.parentNode.children[o];s===e||t&&!s.matches(t)||a.push(s)}if(n&&"function"==typeof n)for(var l=0;l<a.length;l+=1)n(a[l]);return a}function fireClick(e){var t;if(e.ownerDocument)t=e.ownerDocument;else{if(9!==e.nodeType)throw new Error("Invalid node passed to fireEvent: ".concat(e.id));t=e}if(e.dispatchEvent){var n=t.createEvent("MouseEvents");n.initEvent("click",!0,!0),n.synthetic=!0,e.dispatchEvent(n,!0)}else if(e.fireEvent){var a=t.createEventObject();a.synthetic=!0,e.fireEvent("onclick",a)}}function isHidden(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||"none"===window.getComputedStyle(e).display}function getParents(e,t){for(var n=[],a=e&&e.parentElement;a;a=a.parentElement)t&&!a.matches(t)||n.push(a);return n}function jsonPathPicker(e,t,f,n){var u=n||{};u.pathQuotesType=void 0!==u.pathQuotesType?u.pathQuotesType:"single";var a=document.querySelector(e),o=json2html(t,u);function s(e,t){e.classList.toggle("collapsed");for(var n=siblings(e,"ul.json-dict, ol.json-array",function(e){e.style.display=""===e.style.display||"block"===e.style.display?"none":"block"}),a=0;a<n.length;a+=1)if(isHidden(n[a])){for(var o=n[a].children,s=0,l=0;l<o.length;l+=1)"LI"===o[l].tagName&&(s+=1);var r=s+(1<s?" items":" item");n[a].insertAdjacentHTML("afterend",'<a href class="json-placeholder">'.concat(r,"</a>"))}else siblings(n[a],".json-placeholder",function(e){return e.parentNode.removeChild(e)});t.stopPropagation(),t.preventDefault()}function l(e,t){siblings(e,"a.json-toggle",function(e){return fireClick(e,"click")}),t.stopPropagation(),t.preventDefault()}function r(e){if(0!==f.length){for(var t=getParents(e,"li").reverse(),n=[],a=0;a<t.length;a+=1){var o=t[a].dataset.key,s=t[a].dataset.keyType;if("object"===s&&"number"!=typeof o&&u.processKeys&&void 0!==u.keyReplaceRegexPattern){var l=new RegExp(u.keyReplaceRegexPattern,u.keyReplaceRegexFlags),r=void 0===u.keyReplacementText?"":u.keyReplacementText;o=o.replace(l,r)}n.push({key:o,keyType:s})}for(var c={none:"",single:"'",double:'"'}[u.pathQuotesType],i=(n=n.map(function(e,t){var n="brackets"===u.pathNotation,a=!/^\w+$/.test(e.key)||"number"==typeof e.key;return"array"===e.keyType||e.isKeyANumber?"[".concat(e.key,"]"):n||a?"[".concat(c).concat(e.key).concat(c,"]"):0<t?".".concat(e.key):e.key})).join(""),p=0;p<f.length;p+=1)f[p].value=i}}if(isCollapsable(t)&&(o='<a href class="json-toggle"></a>'.concat(o)),a.innerHTML=o,off("click",a),a.addEventListener("click",function(e){for(var t=e.target;t&&t!==this;)t.matches("a.json-toggle")&&(s.call(null,t,e),e.stopPropagation(),e.preventDefault()),t=t.parentNode}),a.addEventListener("click",function(e){for(var t=e.target;t&&t!==this;)t.matches("a.json-placeholder")&&l.call(null,t,e),t=t.parentNode}),a.addEventListener("click",function(e){for(var t=e.target;t&&t!==this;)t.matches(".pick-path")&&r.call(null,t,e),t=t.parentNode}),!0===u.outputCollapsed)for(var c=document.querySelectorAll("a.json-toggle"),i=0;i<c.length;i+=1)fireClick(c[i],"click")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.json2html=json2html,exports.default=jsonPathPicker;